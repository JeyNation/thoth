@keyframes connectionPulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes dashMove {
  0% { border-top-color: #ff4444; }
  50% { border-top-color: #ff8888; }
  100% { border-top-color: #ff4444; }
}

.viewer-container { padding: 20px; background: #fff; height: 100%; overflow: hidden; display: flex; flex-direction: column; }
.viewer-toolbar { margin-bottom: 20px; }
.viewer-toolbar-buttons { display: flex; gap: 4px; flex-wrap: wrap; align-items: center; }
.viewer-toolbar-layout { display:flex; width:100%; align-items:center; justify-content:space-between; gap:12px; }
.viewer-toolbar-info { display:flex; gap:6px; align-items:center; }
.viewer-svg-wrapper { position:relative; }
.viewer-svg-scale-inner { position:relative; }
.viewer-toolbar-buttons .viewer-badge:first-of-type { margin-left:auto; }
.viewer-toolbar-buttons .viewer-btn { 
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:6px 8px;
  border:none;
  background:#ffffff;
  box-shadow:0 0 0 1px #ddd;
  border-radius:6px;
  cursor:pointer;
  transition:background .15s ease, box-shadow .15s ease, transform .15s ease;
  margin-right:4px;
}
.viewer-toolbar-buttons .viewer-btn:last-child { margin-right:0; }
.viewer-toolbar-buttons .viewer-btn:hover { background:#f2f6fa; box-shadow:0 0 0 1px #c0cbd6; }
.viewer-toolbar-buttons .viewer-btn:active { transform:scale(.92); }
.viewer-toolbar-buttons .viewer-btn-toggle-active { background:#e8f4ff; box-shadow:0 0 0 1px #5aa9f7; }
.viewer-toolbar-buttons .viewer-btn-toggle-inactive { background:#ffffff; }
.viewer-panel { flex: 1; overflow: auto; background: #ffffff; border: 1px solid #dee2e6; border-radius: 4px; position: relative; }
.viewer-bounding-box { position: absolute; border-radius: 3px; cursor: grab; display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:bold; transition: all .2s ease; }
.viewer-debug-hidden-toggle { position:absolute; bottom:4px; left:6px; background:rgba(0,0,0,0.7); color:#fff; padding:4px 10px; font-size:11px; border-radius:14px; cursor:pointer; z-index:480; box-shadow:0 2px 4px rgba(0,0,0,.4); user-select:none; }
.viewer-debug-panel { left:0; right:0; bottom:0; color:#fff; padding:8px 12px 12px; z-index:500; font-size:12px; max-height:160px; overflow-y:auto; border-top:2px solid #444; backdrop-filter:blur(2px); }
.viewer-debug-panel button { background:#ff5555; color:#fff; border:none; border-radius:3px; cursor:pointer; font-size:11px; padding:4px 8px; }
.viewer-unlink-btn { background:#333; color:#ddd; border:1px solid #555; border-radius:3px; cursor:pointer; padding:2px 6px; font-size:10px; }
.viewer-loading-wrapper { padding:20px; background:#fff; height:100%; overflow:auto; }
.viewer-loading-inner { display:flex; justify-content:center; align-items:center; height:200px; font-size:18px; color:#666; font-style:italic; }
.viewer-debug-header { display:flex; align-items:center; margin-bottom:4px; }
.viewer-debug-header-title { font-size:13px; letter-spacing:.5px; }
.viewer-debug-header-spacer { flex:1; }
.viewer-debug-hide-btn { background:#ff5555 !important; }
.viewer-debug-grid span.label-dim { opacity:.6; }
.viewer-debug-grid span.breakall { word-break:break-all; }
.viewer-debug-active-links { color:lime; }
.viewer-debug-sources-wrapper { margin-top:6px; font-family:monospace; font-size:11px; line-height:1.4; }
.viewer-unlink-row span.viewer-unlink-id { color:#ff8888; }
.viewer-connection-arrow, .viewer-connection-source-dot, .viewer-connection-target-dot { position:fixed; z-index:1000; pointer-events:none; }
.viewer-connection-arrow { width:16px; height:16px; filter:drop-shadow(0 0 8px rgba(255,68,68,.8)); }
.viewer-connection-source-dot { width:16px; height:16px; background:#ff4444; border-radius:50%; box-shadow:0 0 15px rgba(255,68,68,.8); animation:connectionPulse 1.5s infinite; border:2px solid #fff; pointer-events:auto; cursor:pointer; transition:transform .15s ease, box-shadow .15s ease; }
.viewer-connection-target-dot { width:12px; height:12px; background:#44ff44; border-radius:50%; box-shadow:0 0 10px rgba(68,255,68,.8); border:2px solid #fff; }
.viewer-selection-rect { position:absolute; border:2px dashed #2196f3; background:rgba(33,150,243,.1); z-index:25; pointer-events:none; }

